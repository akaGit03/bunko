<div id="top"></div>

## 主な使用技術

<!-- シールド一覧 -->
<p style="display: inline">
  <!-- バックエンドのフレームワーク一覧 -->
  <img src="https://img.shields.io/badge/-Laravel-E74430.svg?logo=laravel&style=for-the-badge">
  <!-- バックエンドの言語一覧 -->
  <img src="https://img.shields.io/badge/-Php-777BB4.svg?logo=php&style=for-the-badge">
  <!-- フロントエンドのフレームワーク一覧 -->
  <img src="https://img.shields.io/badge/-TailwindCSS-000000.svg?logo=tailwindcss&style=for-the-badge">
  <img src="https://img.shields.io/badge/-Javascript-F7DF1E.svg?logo=javascript&style=for-the-badge">
  <img src="https://img.shields.io/badge/-Node.js-000000.svg?logo=node.js&style=for-the-badge">
  <!-- ミドルウェア一覧 -->
  <img src="https://img.shields.io/badge/-Mysql-4479A1.svg?logo=mysql&style=for-the-badge">
  <!-- インフラ一覧 -->
  <img src="https://img.shields.io/badge/-Git-F05032.svg?logo=git&style=for-the-badge">
  <img src="https://img.shields.io/badge/-Github-181717.svg?logo=github&style=for-the-badge">
  <img src="https://img.shields.io/badge/-Amazon%20aws-232F3E.svg?logo=amazon-aws&style=for-the-badge">
  <!-- IDE一覧 -->
  <img src="https://img.shields.io/badge/-Visualstudiocode-007ACC.svg?logo=visualstudiocode&style=for-the-badge">
</p>

## はじめに
この度はご訪問いただき、誠にありがとうございます。<br />
こちらは、わたしがプログラマー・システムエンジニアへ転職を目指す過程で作成した、自作アプリのリポジトリです。<br />
（※ 現在、このREADMEはポートフォリも兼ねております。目次の「5.」以降はその目的のため記載しております。）

実際に使用してみていただくことも可能です。<br />
下記「[使い方](#使い方)」をご参照の上、是非お試しください。

## 目次

1. [アプリについて](#アプリについて)
2. [使い方](#使い方)
3. [使用技術](#使用技術)
4. [なぜこの技術選定か](#なぜこの技術選定か)
5. [データベース設計](#基本設計)
6. [振り返り](#振り返り)
7. [このアプリを作成した背景](#このアプリを作成した背景)
8. [今後の課題](#今後の課題)

<!-- アプリ名を記載 -->

## :pushpin: アプリについて

### アプリ名
未定
<br />（下記URLで表示される名前はアプリ名ではなく、「本棚の名前のイメージ」です。）

### URL
http://15.168.224.85

### アプリの概要
複数人のユーザー間で本の貸し借りを管理したり、その本の感想を共有したりできるアプリです。<br />
1人で使用する場合も、蔵書目録として活用できます。<br />
（※ ごく私的な目的で作成したアプリのため、用途の意図がわかりにくいかと思います。お時間がございましたら、下記「[このアプリを作成した背景](#このアプリを作成した背景)」をご一読いただけますと幸いです。）


### 機能一覧
- 本の登録・管理機能（CRUD）
- 本の貸し借り管理機能
- コメント投稿機能
- 蔵書の検索機能
- レスポンシブデザイン
- 認証機能（Breeze, Filament）

### 作成期間
要件定義〜デプロイ（※ 作成期間は1ヶ月を目安としました。）<br />
延42日間（作業時間：120h程度）<br />

<p align="right">(<a href="#top">トップへ</a>)</p>


## :pushpin: 使い方
上記の[URL](#URL)に遷移後、「本棚検索」はログインせずにご利用いただけます。<br />
また、蔵書の個々の詳細ページ（検索結果の各項目にカーソルを合わせ、クリックしていただくと表示される「図書情報」の画面）も、ログインせずにご覧いただけます。

本の登録や貸し借り機能、コメント機能もお試しいただけます。<br />
その場合は、**ゲスト用のアカウント（ゲストユーザー）を用意しております**ので、こちらのアカウントにログインの上、お試しください。<br />
ゲストユーザーのログイン時は、下記をご参照ください。<br />
| ログイン情報     |                    |
| :----------    | :----------        |
| メールアドレス：  | guest@exmaple.com  |
| パスワード：     | guest              |

<br />
なお、ボタンや文字色の配色には、おおよそ下記のニュアンスがあります。

- 青緑：「本棚に本やデータを"収める"」
- ピンク：「本棚から本やデータを"抜き出す"」
- 黄色：「画面上でユーザーの選択位置を明示する」

<br />※ 他のユーザー名は『ひつじのショーン』からお借りしております。

<p align="right">(<a href="#top">トップへ</a>)</p>


## :pushpin: 使用技術

ローカルにて、MAMP環境で開発しました。

### フロントエンド     　　　 
- Tailwind CSS 3.1.0
- Javascript
- Node.js 22.2.0

### バックエンド
- PHP 8.2.0
- Laravel 11.23.5

### ミドルウェア
- MySQL 5.7.39

### インフラ
- Git/Github
- AWS EC2(Amazon Linux 2023)
- Apache

### その他
- Visual Studio Code
- ChatGPT GPT-4
- Google Sheets
- Google Document
- Mac OS

<p align="right">(<a href="#top">トップへ</a>)</p>


## なぜこの技術選定か

### PHP（Laravel）
職業訓練で学習した言語・フレームワークであり、アプリの機能面からもとくに支障はないと考えたためです。
（PythonAnywhereがデプロイが容易かつ無料で利用できるようだったので、Python/Djangoも検討しました。しかし、次項のとおりAWSも試したいと考え、作成期間を限っていたこともあり、多少とも馴染みのあるLaravelにしました）。

### Tailwind
CSSのフレームワークを使用してみたかったためです（職業訓練ではCSSは自分で書いていました）。
また、Laravelにインストールした認証機能BreezeでTailwindが使用されていたため、BootstrapではなくTailwindで統一することにしました。

### AWS
クラウドサービスとしてよく使われているサービスであり、実際に求人にも開発環境等でよく名前が挙がっているためです。
また、AWSのサーバーでデプロイを試みることで、インフラ分野の学習にもつながると考えました。

<p align="right">(<a href="#top">トップへ</a>)</p>


## :pushpin: データーベース設計

### ER図
IDEF1X記法で、簡易的に作成しています。<br />

![ER図](https://github.com/user-attachments/assets/cb1c833b-d192-41c5-9975-4a35ddab5d0f)

### テーブル定義
#### typesテーブル
![typesテーブル](https://github.com/user-attachments/assets/8c674dfa-9668-4fba-ab17-5bc7169d421f)
#### usersテーブル
![usersテーブル](https://github.com/user-attachments/assets/628cebd0-f168-49cf-b89b-bf9e44ae7fac)
#### booksテーブル
![booksテーブル](https://github.com/user-attachments/assets/eb7214cf-6989-4b74-96c1-7146c6b747e4)
#### lendingsテーブル
![lendingsテーブル](https://github.com/user-attachments/assets/1aec06b7-300c-42c5-85c3-11e71afc2976)
#### commentsテーブル
![commentsテーブル](https://github.com/user-attachments/assets/532c2187-4e97-46e6-8573-df2c1675351f)

<p align="right">(<a href="#top">トップへ</a>)</p>


## :pushpin: 振り返り

### :mag: 工夫した点

#### コメント機能
貸し借りを把握できると同時に、感想をはじめ、その本にまつわる世間話、書籍の詳細情報、関連するネット記事、書評など、諸々書き込めることで、情報交換やささやかな交流の場にもなったら嬉しいと思いました。そのための役割として、コメント機能を実装しました。

#### UI
年齢に関係なく、事前に少し説明があれば、あとはユーザーで直感的に扱えるようにしたいと思いました。<br />
例えば、全体の色数は3色程度に抑えて見た目をシンプルにし、また「[使い方](#使い方)」で触れたように、配色に意味を持たせました。

ただ、色覚障害者から見てどうか言われると現状では疑問があり、またSVGを利用してアイコンでもわかるようにするなど、改善するべきだと考えています。

#### 実務を意識すること
プロジェクト開発は、Git / Githubで管理しました。<br />
また、わからないことや新しい技術など何か調べる際に、ある場合は公式ドキュメントに一度は目を通してみました。<br />
今後のためにも学習内容は欠かせないものであると考え、適宜基本情報技術者のテキストも参照しました。

### :mag: 苦労した点

#### リレーション
クエリビルダを立てることに苦労しました。とくに中間テーブルである貸出テーブルを介したデータの抽出がむずかしかったです。<br />
貸し手が確認する「貸出中の本」と借り手が確認する「借出中の本」と、見た目には同じようなデータを抽出する場合でも、クエリビルダの立て方を変える必要がありました。とくに貸出表において、当初は自分の理解と抽出結果が違っていて戸惑いました。<br />また、抽出した同じデータをビューに表示する際も、表示項目によっては一度リレーションメソッドを通す必要があるなど、一様ではないことがわかりました。<br />
望む機能は実現できました。しかし、リレーションの理解が足りないとともに、貸出テーブルに関するリレーションメソッドには改善の余地があり、クエリビルダももっと工夫ができるだろうと思います。

#### 検索の非同期通信化
UI/UXの観点からも、検索を非同期通信にしたいと思いました。しかし、ページネーションを含む場合の実装に知識と理解が追いつかず、3日ほど取り組んだものの、時間の問題と機能の優先度から、今回は一旦、実装を見送ることにしました。<br />
今後、折りを見てあらためて取り組みたいと思います。

#### AWS
ややとっつきにくく、アカウント作成からデプロイまで、予想よりずっと手間取りました。<br />
IAMユーザーではデプロイ用のユーザーないしグループを用意し、これにSystemAdministratorの許可セットを付与したところ、インスタンスに接続できなくなってしまい戸惑いました（SystemAdministratorの許可セットにEC2InstanceConnectのポリシーを含めることで解決）。<br />
また、Githubからアプリをクローンしたものの、公開してみると「500 SERVER ERROR」が発生しました（.gitignoreによる、ローカル環境とEC2上とでファイル構造・ファイルの有無に違いが生じることの認識が足りていませんでした。また、わたしの作成したアプリはLaravelにBreezeをインストールしていましたが、参考にしていたサイトはいわばプレーンなLaravelプロジェクトを使用しているものばかりだったため、この違いから「npm run build」の未実行など、手順に抜けがありました）。最後の最後に起きたエラーということもあり、解決まで気力的にややしんどいものがありました。<br />
同時に、期待通り、この作業を通してネットワーク分野とセキュリティ分野を自分事として学ぶ良い機会にもなりました。

<p align="right">(<a href="#top">トップへ</a>)</p>


## :pushpin: 今後の改善
- まとめて借りる/返却する機能（カート機能）の実装
- PHPUnitを利用したテスト
- 検索機能の非同期通信化
- APIの利用
<br />etc…

<p align="right">(<a href="#top">トップへ</a>)</p>


## :bulb: このアプリを作成した背景
### 要約
以前、友人・知人間で、直接顔を合わせなくても本の貸し借りができる「共有本棚」を設置・運用したことがありました。<br />
その際、本棚に貸し出している各々の本と、貸し借りの状況を把握できた方が良いだろうと思い、それに適したアプリがほしい（作れるものなら自分で作れたらよかった）と思ったことがありました。<br />
**今回作成したアプリは、その当時自分が「ほしい」と思っていたアプリです。**

### 詳しい経緯
「共有本棚」の要旨は次のとおりです。
1. **他の人にも読んでもらいたい・貸しても構わないといった本などを、メンバーそれぞれで持ち寄り、1つの本棚に置いておく。また、その本棚にあるものは、各々借りてよい**
2. **貸し手と借り手は、直接会わなくても貸し借りができる。また、好きなときに借りられる**

このアイデアの発想は、ロンドンやベルリンで、使われなくなった公衆電話ボックスが住民間で不要になった本の交換の場（「公共本棚」）として活用されているという話から来ています。

#### 共有本棚の発案
わたしは5年ほど前（新型コロナウイルスのパンデミックがはじまる直前のころでした）、長野県の山間部に移住しました。<br />
この地域には図書館や書店がなく、最寄りのそれらを訪ねるには、車で40分ほどの市街地まで行かなければなりません（そしていずれも小規模なものです）。<br />
一方で、移住後に知り合った地域の方々には、日頃から本に親しんでいたり、図書館や書店のような場を求めていたりする方が少なくないようにも見受けられました。

長引く行動制限下で、図書館や書店のような「空間」や、本との「偶然の出会い」に対する”飢え”を覚えていた中、上述の「公共本棚」の話を思い出しました。<br />
地域の友人・知人それぞれの志向や関心が一所に集う様子はおもしろくなりそうだという見込みもあり、2年半ほど前、まず友人2名に声をかけ、「共有本棚」を設置しました。

#### 本棚の設置
本棚は、友人宅の玄関の一隅に設置しました。<br />
また、わたしたちの場合は以下の2点を鑑み、メンバーシップ制としました。
1. 本は貸し出されたものである（持ち主あり）
2. 人の家のスペースを借りている

防犯として、ナンバーロック式の頑丈なキーボックスに、本棚を設置した友人宅の合鍵を収納しました。キーボックスは友人宅の敷地内に設置し、キーボックスの所在と解除ナンバーを、メンバー間に限って共有しました。

1ヶ月ほどの試験運用の後、他の顔見知りにも声をかけつつ、最終的には20後半〜60代まで16名ほどに利用していただき、1年ほど運用しました。

#### アプリ作成
この本棚を準備・運用する中で、本棚にあるものや貸し借りの状況を把握する必要がありました。
当時は、専用ファイルや用紙など文房具を用いて管理しました。しかし同時に、この管理をデジタル化してもいいし、適したアプリはないか、あるいは自分で作れたらいいのに…などと考えたりもしていました。

わたしは最近、職業訓練校の「プログラマー・システムエンジニア養成科」を修了しました。現在の自分であれば、当時の自分の気持ちをかたちにできるのではないかと思い、訓練で学んだ技術の復習も兼ね、このアプリを作成することにしました。

<p align="right">(<a href="#top">トップへ</a>)</p>
